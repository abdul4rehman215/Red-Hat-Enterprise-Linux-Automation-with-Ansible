<?php
require_once 'config.php';

echo "<h1>Database Connection Test</h1>";

try {
 $pdo = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME, DB_USER, DB_PASS);
 $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

 echo "<h2>Connection Details:</h2>";
 echo "<ul>";
 echo "<li>Host: " . DB_HOST . "</li>";
 echo "<li>Database: " . DB_NAME . "</li>";
 echo "<li>User: " . DB_USER . "</li>";
 echo "<li>Status: <span style='color: green;'>Connected</span></li>";
 echo "</ul>";

 // Test query
 $stmt = $pdo->query("SELECT VERSION() as version");
 $version = $stmt->fetch()['version'];
 echo "<p>MySQL Version: " . $version . "</p>";

 // Show tables
 $stmt = $pdo->query("SHOW TABLES");
 $tables = $stmt->fetchAll(PDO::FETCH_COLUMN);
 echo "<h3>Available Tables:</h3>";
 echo "<ul>";
 foreach($tables as $table) {
   echo "<li>" . $table . "</li>";
 }
 echo "</ul>";

} catch(PDOException $e) {
 echo "<h2 style='color: red;'>Connection Failed!</h2>";
 echo "<p>Error: " . $e->getMessage() . "</p>";
}
?>
<hr>
<p><a href="index.php">Back to Main Page</a></p>
